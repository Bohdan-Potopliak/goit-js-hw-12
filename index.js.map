{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["`use strict`\nimport axios from 'axios';\n\nconst API_KEY = '47392325-3e255e53541a2cdc9281782e2';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nasync function searchAPI(search, page = 1) {\n    try {\n        const { data } = await axios.get(BASE_URL, {\n        params: {\n            key: API_KEY,\n            q: search,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n            per_page: PER_PAGE,\n            page,\n        },\n        });\n        return data;\n    } catch (error) {\n        throw new Error(error.response?.data?.message || 'Network error');\n    }\n}\n\nexport default searchAPI;\n","`use strict`\n\nfunction createMarkup (arr) {\n    return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n            />\n        </a>\n        <ul class=\"bottom-bar\">\n            <li>\n                <p class=\"bottom-txt\">Likes</p>\n                <p class=\"bottom-value\">${likes}</p>\n            </li>\n            <li>\n                <p class=\"bottom-txt\">Views</p>\n                <p class=\"bottom-value\">${views}</p>\n            </li>\n            <li>\n                <p class=\"bottom-txt\">Comments</p>\n                <p class=\"bottom-value\">${comments}</p>\n            </li>\n            <li>\n                <p class=\"bottom-txt\">Downloads</p>\n                <p class=\"bottom-value\">${downloads}</p>\n            </li>\n        </ul>\n    </li>`).join(\"\");\n}\n\nexport default createMarkup;","`use strict`\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport searchAPI from './js/pixabay-api';\nimport createMarkup from './js/render-functions';\n\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.js-search-form');\nconst loader = document.getElementById('loader');\n\nlet lightbox;\nlet currentPage = 1;\nlet currentQuery = '';\n\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.textContent = 'Load more';\nloadMoreBtn.classList.add('load-more-btn');\nloadMoreBtn.style.display = 'none';\ndocument.body.appendChild(loadMoreBtn);\n\nform.addEventListener('submit', handlerSearch);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\nasync function handlerSearch(event) {\nevent.preventDefault();\nconst search = event.target.elements.search.value.trim();\n\nif (!validateQuery(search)) return;\n\ncurrentQuery = search;\ncurrentPage = 1;\nloader.style.display = 'flex';\ngallery.innerHTML = '';\nloadMoreBtn.style.display = 'none';\n\ntry {\n    const data = await searchAPI(search, currentPage);\n    processSearchResults(data);\n} catch (error) {\n    iziToast.error({\n    message: `Something went wrong: ${error.message}`,\n    });\n} finally {\n    loader.style.display = 'none';\n}\n}\n\nasync function loadMoreImages() {\ncurrentPage += 1;\nloader.style.display = 'flex';\n\ntry {\n    const data = await searchAPI(currentQuery, currentPage);\n    processSearchResults(data, true);\n    smoothScroll();\n} catch (error) {\n    iziToast.error({\n    message: `Something went wrong: ${error.message}`,\n    });\n} finally {\n    loader.style.display = 'none';\n}\n}\n\nfunction processSearchResults(data, append = false) {\nif (data.hits.length === 0) {\n    noResultsMessage();\n    return;\n}\n\nif (append) {\n    gallery.innerHTML += createMarkup(data.hits);\n} else {\n    gallery.innerHTML = createMarkup(data.hits);\n}\n\nlightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\nlightbox.refresh();\n\nif (data.totalHits <= currentPage * 15) {\n    loadMoreBtn.style.display = 'none';\n    iziToast.info({\n    message: \"We're sorry, but you've reached the end of search results.\",\n    });\n} else {\n    loadMoreBtn.style.display = 'block';\n}\n}\n\nfunction noResultsMessage() {\niziToast.error({\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n});\n}\n\nfunction validateQuery(query) {\nif (!query) {\n    iziToast.warning({\n    message: 'Please enter a search query.',\n    });\n    return false;\n}\nreturn true;\n}\n\nfunction smoothScroll() {\nconst { height: cardHeight } = document.querySelector('.gallery-item').getBoundingClientRect();\nwindow.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n});\n}\n"],"names":["API_KEY","BASE_URL","PER_PAGE","searchAPI","search","page","data","axios","error","_b","_a","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","gallery","form","loader","lightbox","currentPage","currentQuery","loadMoreBtn","handlerSearch","loadMoreImages","event","validateQuery","processSearchResults","iziToast","smoothScroll","append","noResultsMessage","SimpleLightbox","query","cardHeight"],"mappings":"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"}